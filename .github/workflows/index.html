<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>æµ·åº•çŸ¿äº§åˆ†å¸ƒâ€”â€”æ‹–æ‹½é…å¯¹ï¼ˆä¼˜åŒ–ç‰ˆï¼‰</title>
<style>
  :root{
    --w: 1200px;            /* ç”»å¸ƒåŸºå‡†å®½ */
    --tag: 64px;            /* æ ‡ç­¾é«˜åº¦ï¼ˆæ›´å¤§ï¼Œé€‚åˆæ‰‹æŒ‡ï¼‰ */
    --tag-font: 20px;       /* æ ‡ç­¾å­—ä½“ */
    --btn: 48px;            /* æŒ‰é’®é«˜åº¦ */
    --btn-font: 18px;       /* æŒ‰é’®æ–‡å­—å¤§å° */
  }
  *{box-sizing:border-box;margin:0;padding:0;}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,'Noto Sans SC',sans-serif;background:#f6f7fb;color:#111;display:flex;justify-content:center;align-items:center;min-height:100vh;overflow:hidden;}
  header{
    position:absolute;left:0;top:0;width:100%;z-index:10;display:flex;flex-direction:row;gap:12px;
    padding:12px 20px;justify-content:space-between;max-width:100%;align-items:center;
    background:rgba(255,255,255,.85);box-shadow:0 2px 12px rgba(0,0,0,.06);
  }
  header h1{font-size:20px;text-align:left;margin:0;padding-right:12px;}
  header .controls{display:flex;flex-direction:row;gap:12px;width:auto;}

  /* æŒ‰é’®æ ·å¼ï¼ˆç¡®ä¿è‡ªé€‚åº”ï¼‰ */
  button{
    border:0;background:#111;color:#fff;padding:0 18px;height:var(--btn);border-radius:12px;cursor:pointer;font-size:var(--btn-font);
    width:auto;text-align:center;max-width:220px;
  }
  button.secondary{background:#e9ecf3;color:#111}
  button:active{transform:translateY(1px)}

  /* ç”»å¸ƒåŒºåŸŸ */
  .stage-wrap{display:flex;justify-content:center;padding:0 16px;max-width:1200px;width:100%}
  .stage{
    width:min(var(--w), 95vw); height:calc(var(--w) * 995 / 1382); /* Automatically adjusts based on aspect ratio */
    background:#ddd url('bg.png') center/contain no-repeat;
    border-radius:16px;box-shadow:0 10px 26px rgba(25,35,58,.15);
    position:relative;overflow:hidden;
    touch-action:none; /* Prevent scroll while dragging */
  }

  .drop{
    position:absolute;border:3px dashed rgba(0,0,0,.22);border-radius:14px;
    transition:box-shadow .15s, background .15s, border-color .15s;
    backdrop-filter:saturate(1.1);
  }
  .drop.hidden{border-color:transparent;background:transparent}
  .drop.ok{border-color:#22c55e;background:rgba(34,197,94,.12)}
  .drop.hint{animation:blink 1s linear 3}
  @keyframes blink{50%{box-shadow:0 0 0 4px rgba(59,130,246,.28)}}

  .bank{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;padding:0 14px 20px;width:100%;max-width:1200px}
  .tag{
    user-select:none; -webkit-user-drag: element;
    padding:10px 16px; height:var(--tag); line-height:calc(var(--tag) - 20px);
    background:#fff;border:2px solid #e8eaf1;border-radius:14px;box-shadow:0 6px 16px rgba(29,43,79,.10);
    cursor:grab;font-weight:700;font-size:var(--tag-font); min-width:132px; text-align:center;
    touch-action:none;
  }
  .tag.dragging{opacity:.85;transform:scale(1.04);cursor:grabbing}
  .tag.lock{background:#eafff1;border-color:#b6f3ce;cursor:default}

  .toast{
    position:fixed;left:50%;bottom:22px;transform:translateX(-50%);
    background:#111;color:#fff;padding:12px 16px;border-radius:12px;
    box-shadow:0 10px 30px rgba(0,0,0,.2);opacity:0;pointer-events:none;transition:opacity .2s;font-size:16px
  }
  .toast.show{opacity:1}

  .score{
    position:absolute;right:12px;top:12px;background:#111;color:#fff;
    font-size:15px;padding:8px 12px;border-radius:999px;opacity:.9
  }

  /* â€”â€” ç²¾ä¿®è½ç‚¹ â€”â€” */
  .d-sea-surface{left:5.2%; top:13.5%; width:62%; height:8.5%;}
  .d-beach-sand{left:78.8%; top:29.2%; width:14.5%; height:8.5%;}
  .d-oilgas{left:39.8%; top:36.2%; width:23.5%; height:9.5%;}
  .d-shelf{left:59.2%; top:41.0%; width:20%; height:11%;}
  .d-slope{left:29.0%; top:57.5%; width:34%; height:16.5%;}
  .d-mn-nodule{left:9.6%; top:62.5%; width:17.5%; height:14%;}
  .d-sea-floor{left:6.3%; top:78.0%; width:18.5%; height:11.5%;}
</style>
</head>
<body>

<header>
  <h1>æ‹–æ‹½é…å¯¹ï¼šæµ·åº•çŸ¿äº§åˆ†å¸ƒç¤ºæ„å›¾ï¼ˆå·¦ä¾§æŒ‰é’®å…¨å±ä¼˜åŒ–ç‰ˆï¼‰</h1>
  <div class="controls">
    <button id="toggle">éšè—è½ç‚¹</button>
    <button id="reset" class="secondary">é‡ç©</button>
    <button id="answer" class="secondary">æŸ¥çœ‹ç­”æ¡ˆ</button>
  </div>
</header>

<div class="stage-wrap">
  <div class="stage" id="stage">
    <div class="score" id="score">å¾—åˆ† 0 / 7</div>

    <div class="drop d-sea-surface" data-accept="æµ·é¢" title="æµ·é¢"></div>
    <div class="drop d-beach-sand" data-accept="æ»¨æµ·ç ‚çŸ¿" title="æ»¨æµ·ç ‚çŸ¿"></div>
    <div class="drop d-oilgas" data-accept="çŸ³æ²¹å¤©ç„¶æ°”" title="çŸ³æ²¹å¤©ç„¶æ°”"></div>
    <div class="drop d-shelf" data-accept="å¤§é™†æ¶" title="å¤§é™†æ¶"></div>
    <div class="drop d-slope" data-accept="å¤§é™†å¡" title="å¤§é™†å¡"></div>
    <div class="drop d-mn-nodule" data-accept="å¤šé‡‘å±ç»“æ ¸" title="å¤šé‡‘å±ç»“æ ¸"></div>
    <div class="drop d-sea-floor" data-accept="æµ·åº•" title="æµ·åº•"></div>
  </div>
</div>

<div class="bank" id="bank">
  <div class="tag" draggable="true" id="æµ·é¢">æµ·é¢</div>
  <div class="tag" draggable="true" id="æ»¨æµ·ç ‚çŸ¿">æ»¨æµ·ç ‚çŸ¿</div>
  <div class="tag" draggable="true" id="çŸ³æ²¹å¤©ç„¶æ°”">çŸ³æ²¹å¤©ç„¶æ°”</div>
  <div class="tag" draggable="true" id="å¤§é™†æ¶">å¤§é™†æ¶</div>
  <div class="tag" draggable="true" id="å¤§é™†å¡">å¤§é™†å¡</div>
  <div class="tag" draggable="true" id="å¤šé‡‘å±ç»“æ ¸">å¤šé‡‘å±ç»“æ ¸</div>
  <div class="tag" draggable="true" id="æµ·åº•">æµ·åº•</div>
</div>

<div class="toast" id="toast"></div>

<script>
// JavaScript code for drag-and-drop and game logic
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);
const stage = $('#stage');
let score = 0;
const total = $$('.drop').length;
updateScore();

function updateScore(){ $('#score').textContent = `å¾—åˆ† ${score} / ${total}` }
function toast(msg, ms=1400){
  const t = $('#toast'); t.textContent = msg; t.classList.add('show');
  clearTimeout(t._hi); t._hi = setTimeout(()=>t.classList.remove('show'), ms);
}

/* â€”â€” é€šç”¨å¸é™„å‡½æ•° â€”â€” */
function snapToDrop(tag, drop){
  drop.classList.add('ok');
  tag.classList.add('lock');
  const r = drop.getBoundingClientRect();
  const st = stage.getBoundingClientRect();
  const x = r.left - st.left + r.width/2 - tag.offsetWidth/2;
  const y = r.top - st.top + r.height/2 - tag.offsetHeight/2;
  tag.style.position = 'absolute';
  tag.style.left = x + 'px';
  tag.style.top  = y + 'px';
  tag.style.zIndex = 2;
  stage.appendChild(tag);
  score++; updateScore();
  if(score===total){ toast('ğŸ‰ å…¨éƒ¨æ­£ç¡®ï¼', 1800); }
}

/* â€”â€” æ¡Œé¢ï¼šåŸç”Ÿ Drag & Drop â€”â€” */
$$('.tag').forEach(tag=>{
  tag.addEventListener('dragstart', e=>{
    e.dataTransfer.setData('text/plain', tag.id);
    tag.classList.add('dragging');
  });
  tag.addEventListener('dragend', e=> tag.classList.remove('dragging'));
});
$$('.drop').forEach(drop=>{
  drop.addEventListener('dragover', e=>{ e.preventDefault() });
  drop.addEventListener('drop', e=>{
    e.preventDefault();
    const id = e.dataTransfer.getData('text/plain');
    const tag = document.getElementById(id);
    if(!tag || tag.classList.contains('lock')) return;
    const need = drop.dataset.accept;
    if(id === need){
      snapToDrop(tag, drop);
      const notes = {
        'æµ·é¢':'æµ·æ°´ä¸å¤§æ°”çš„ç•Œé¢ï¼Œæ˜¯æµ·ä¸Šè¿è¾“ä¸é£æµªæ´»åŠ¨åŒºã€‚',
        'æ»¨æµ·ç ‚çŸ¿':'å¤šå½¢æˆäºæµ·æ»¨æˆ–é™†æ¶åŒºçš„æ³¢æµª/æ½®æµæ²‰ç§¯å¸¦ï¼Œå¸¸å«é‡çŸ¿ç‰©ã€‚',
        'çŸ³æ²¹å¤©ç„¶æ°”':'èµ‹å­˜åœ¨å¤§é™†æ¶æ²‰ç§¯ç›†åœ°ï¼Œè¿‘æµ·å¹³å°å¼€é‡‡ã€‚',
        'å¤§é™†æ¶':'æ°´æ·±ä¸€èˆ¬<200mï¼Œèµ„æºä¸°å¯Œã€ä¾¿äºå¼€å‘ã€‚',
        'å¤§é™†å¡':'ä»å¤§é™†æ¶å‘æ·±æµ·è¿‡æ¸¡çš„é™¡å¡åœ°å¸¦ã€‚',
        'å¤šé‡‘å±ç»“æ ¸':'ä¸»è¦ä½äºæ·±æµ·ç›†åœ°ï¼ˆçº¦4â€“6åƒç±³ï¼‰ï¼Œå¯ŒMnã€Niã€Coã€Cuç­‰ã€‚',
        'æµ·åº•':'æ·±æµ·ç›†åœ°åº•éƒ¨ï¼Œç»†ç²’æ²‰ç§¯è¦†ç›–ã€‚'
      };
      toast(`âˆš ${need}ï¼š${notes[need]||''}`, 1600);
    }else{
      drop.classList.add('hint');
      setTimeout(()=>drop.classList.remove('hint'), 900);
      toast('Ã— ä½ç½®ä¸å¯¹ï¼Œå†æƒ³æƒ³ï½', 900);
    }
  });
});

let hidden = false;
$('#toggle').addEventListener('click', ()=>{
  hidden = !hidden;
  $$('.drop').forEach(d=> d.classList.toggle('hidden', hidden));
  $('#toggle').textContent = hidden ? 'æ˜¾ç¤ºè½ç‚¹' : 'éšè—è½ç‚¹';
});

$('#reset').addEventListener('click', ()=>{
  score = 0; updateScore();
  const bank = $('#bank');
  $$('.drop').forEach(d=> d.classList.remove('ok'));
  $$('.tag').forEach(t=>{
    t.classList.remove('lock','dragging');
    t.removeAttribute('style');
    bank.appendChild(t);
  });
  if(hidden){ $('#toggle').click(); }
  toast('å·²é‡ç½®ï¼Œå¼€å§‹é‡æ‹–ï¼', 900);
});

$('#answer').addEventListener('click', ()=>{
  $('#reset').click();
  setTimeout(()=>{
    $$('.drop').forEach(drop=>{
      const id = drop.dataset.accept;
      const tag = document.getElementById(id);
      snapToDrop(tag, drop);
    });
  },10);
});
</script>
</body>
</html>